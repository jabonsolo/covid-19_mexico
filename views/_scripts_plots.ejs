<script>
    // Plot to aggregated Chart
    var ctx = document.getElementById('aggregatedChart');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: <%- JSON.stringify(data.date); %>,
            datasets: [{
                label: 'Confirmed',
                data: <%= JSON.stringify(data.confirmed); %>,
                backgroundColor: [
                    'rgba(87, 146, 223, 0.2)',
                ],
                borderColor: [
                    'rgba(87, 146, 223, 1)',
                ],
                borderWidth: 3
            },
            {
                label: 'Active',
                data: <%= JSON.stringify(data.active); %>,
                backgroundColor: [
                    'rgba(170, 89, 242, 0.2)',
                ],
                borderColor: [
                    'rgba(170, 89, 242, 1)',
                ],
                borderWidth: 3
            },
            {
                label: 'Recovered',
                data: <%= JSON.stringify(data.recovered); %>,
                backgroundColor: [
                    'rgba(97, 179, 102, 0.2)',
                ],
                borderColor: [
                    'rgba(97, 179, 102, 1)',
                ],
                borderWidth: 3
            },
            {
                label: 'Deaths',
                data: <%= JSON.stringify(data.deaths); %>,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                ],
                borderWidth: 3
            }
        ]},
        options: {
            responsive: true,
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Total de casos COVID-19 en México',
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });

    //Plot to daily chart
    var ctx2 = document.getElementById('dailyChart');
    var myChart = new Chart(ctx2, {
        type: 'line',
        data: {
            labels: <%- JSON.stringify(data.date); %>,
            datasets: [{
                label: 'Confirmed',
                data: <%= JSON.stringify(data.confirmedDiff); %>,
                backgroundColor: [
                    'rgba(87, 146, 223, 0.2)',
                ],
                borderColor: [
                    'rgba(87, 146, 223, 1)',
                ],
                borderWidth: 3
            },
            {
                label: 'Recovered',
                data: <%= JSON.stringify(data.recoveredDiff); %>,
                backgroundColor: [
                    'rgba(97, 179, 102, 0.2)',
                ],
                borderColor: [
                    'rgba(97, 179, 102, 1)',
                ],
                borderWidth: 3
            },
            {
                label: 'Deaths',
                data: <%= JSON.stringify(data.deathsDiff); %>,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                ],
                borderWidth: 3
            }
        ]},
        options: {
            responsive: true,
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Nuevos casos por día COVID-19 en México',
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });

    //Colors used on comparative Charts
    var arrayColors = [
        "rgba(131,175,9)",
        "rgba(142,220,248)",
        "rgba(201,184,206)",
        "rgba(26,170,210)",
        "rgba(220,198,158)",
        "rgba(158,170,84)",
        "rgba(60,144,243)",
        "rgba(131,142,151)",
        "rgba(61,87,125)",
        "rgba(93,152,118)",
        "rgba(252,26,54)"
    ]

    //Plot comparative chart confirmed cases
    var ctx3 = document.getElementById('top10Chart_confirmed');
    var myChart = new Chart(ctx3, {
        type: 'line',
        data: {
            labels: <%- JSON.stringify(top10Data.enumArrayConfirmed); %>,
            datasets: [
                <% for(key in top10Data.top10List) { %>
                {
                    label: "<%- top10Data.top10List[key].country %>",
                    fill: false,
                    data: <%= JSON.stringify(top10Data.top10DataConfirmed[key].confirmed); %>,
                    borderColor: arrayColors[<%- key %>],
                    <% if(key == 10) { %>
                        borderWidth: 3
                    <% } else { %>
                        borderWidth: 1
                    <% } %> 
                },
                <% } %>
            ]
        },
        options: {
            responsive: true,
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Numero acumulado de casos confirmados, por numero de días desde el caso numero 100.',
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: false
                    }
                }]
            }
        }
    });

    //Plot comparative chart deaths
    var ctx4 = document.getElementById('top10Chart_deaths');
    var myChart = new Chart(ctx4, {
        type: 'line',
        data: {
            labels: <%- JSON.stringify(top10Data.enumArrayDeaths); %>,
            datasets: [
                <% for(key in top10Data.top10List) { %>
                {
                    label: "<%- top10Data.top10List[key].country %>",
                    data: <%= JSON.stringify(top10Data.top10DataDeaths[key].deaths); %>,
                    fill: false,
                    borderColor: arrayColors[<%- key %>],
                    <% if(key == 10) { %>
                        borderWidth: 3
                    <% } else { %>
                        borderWidth: 1
                    <% } %> 
                },
                <% } %>
            ]
        },
        options: {
            responsive: true,
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Numero acumulado de muertes, por numero de días desde la muerte numero 10.',
            },
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: false
                    }
                }]
            }
        }
    });
</script>